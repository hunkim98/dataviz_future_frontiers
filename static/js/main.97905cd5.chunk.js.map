{"version":3,"sources":["../node_modules/sentiment/languages sync /^/.//.*//index$","utils/csv.ts","utils/quant/support-resistance.ts","context/FrontiersContext.tsx","context/CryptoContext.tsx","assets/coin_logos/aave.png","assets/coin_logos/algo.png","assets/coin_logos/atom.png","assets/coin_logos/ankr.png","assets/coin_logos/bch.png","assets/coin_logos/btc.png","assets/coin_logos/celo.png","assets/coin_logos/doge.png","assets/coin_logos/enj.png","assets/coin_logos/eos.png","assets/coin_logos/eth.png","assets/coin_logos/etc.png","assets/coin_logos/knc.png","assets/coin_logos/link.png","assets/coin_logos/matic.png","assets/coin_logos/nu.png","assets/coin_logos/sol.png","assets/coin_logos/stx.png","assets/coin_logos/xrp.png","assets/coin_logos/xtz.png","assets/coin_logos/mana.png","assets/coin_logos/sand.png","utils/math/Vector4.ts","utils/math/Vector3.ts","utils/math/Vector2.ts","utils/cartesian.ts","components/Infographic/Spaceship.ts","utils/clamp.ts","utils/text.ts","utils/math/Matrix2x2.ts","utils/math/Matrix3x3.ts","utils/rotator2d.ts","components/Infographic/index.tsx","assets/spaceship.png","components/Infographic/Planet.ts","utils/generateRandomName.ts","components/Infographic/Sun.ts","components/Infographic/Canvas.ts","utils/drawShape.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","fetchCsv","fileName","fetch","process","response","reader","body","getReader","read","result","decoder","TextDecoder","decode","value","csv","Papa","data","parse","CandleTrend","ExampleColorPallet","FrontiersContext","createContext","FrontiersContextProvider","children","useState","Map","frontiers","setFrontiers","minMaxAvgBuzz","setMinMaxAvgBuzz","minMaxTotalBuzz","setMinMaxTotalBuzz","currentFrontier","setCurrentFrontier","useEffect","GetData","then","res","frontierSet","Set","frontierData","frontiersCount","i","length","row","name","frontier","has","buzz","type","now","_2025","_2030","_2040","_2050","beyond","sources","urls","slice","Number","replace","color","add","push","maxAvg","minAvg","MAX_VALUE","maxTotalBuzz","minTotalBuzz","it","val","filtered","filter","d","avgBuzz","reduce","acc","curr","totalBuzz","prev","newMap","set","values","next","min","max","firstFrontier","title","Provider","changeFrontier","frontierName","get","console","log","Language","Vector4","x","y","z","w","this","v","Math","sqrt","dot","n","Vector2","Vector3","scalarBy","One","Zero","UnitX","UnitY","UnitZ","UnitW","isPoint","floor","pow","SpaceshipDirection","convertCartesianToScreenPoint","canvas","cartesianPoint","dpr","width","height","changeRelativeValueToRealValue","inputMin","inputMax","returnMin","returnMax","relativeValue","changeRelativeValueToRealValueInversed","wrapText","ctx","text","maxWidth","lineHeight","words","split","line","testLine","lineArray","measureText","Matrix2x2","InCol0","InCol1","Cols","m","subtract","negative","transposedMatrix","transpose","Matrix3x3","InCol2","toVector2","Rotator2D","InDegree","degree","getClampedValue","clamp","PI","newDegree","cos","toRadian","sin","toAffine","undefined","angle","FrontierTime","Spaceship","canvasEdgePosition","planetRotator","edgeRotator","planet","direction","progress","imageElement","opacity","position","startPosition","endPosition","progressIncreaseDelta","isDestinationReached","speed","getContext","img","Image","src","OUT","onload","draw","destinationPosition","trajectoryOpacity","trajectoryStartingFrom","IN","trajectoryEndsAt","linePointingSpaceship","trailingPoint","squareDistanceTo","removeSpaceShip","save","grad","createLinearGradient","addColorStop","beginPath","moveTo","lineTo","strokeStyle","stroke","closePath","restore","correctedEdgePosition","imageWidth","imageHeight","imageHalfWidth","imageHalfHeight","translate","fillStyle","rotate","globalAlpha","drawImage","dx","dy","atan2","drawTrajectory","drawSpaceshipImage","Planet","content","foreColor","backColor","maxBuzzIndex","minBuzzIndex","angleTiltRatio","sun","rotator","radius","distanceFromSun","spaceShips","greenness","spaceShipDirection","isPopupOpen","canvasDrawPosition","sentimentDegree","sentiment","Sentiment","analyze","score","positionAffineVector","rotateAffineMatrix","getRotateAffineMatrix","multiplyVector","rsi","spaceShipCount","spaceShipRegenerationInterval","increaseRatio","correlationCoefficient","minDistance","maxDistance","relativeToRadian","tanOfRadian","tan","minRotatorDegree","maxRotatorDegree","criterionRotator","random","quadrant","canvasEdgeStartPointOffset","abs","edgePosition","getCanvasOuterTrajectoryPoint","nanoid","spaceShipId","spaceShip","arc","lineWidth","drawPosition","fill","drawSpaceShips","drawOverlay","textAlign","textBaseline","font","wrappedText","forEach","item","lineHeightOffset","fillText","String","trim","setDpr","Sun","time","minBuzz","maxBuzz","brightness","MIN_BRIGHTNESS","MAX_BRIGHTNESS","maxRadius","minRadius","setBrightness","drawBrightnessInner","drawBrightnessOuter","drawSun","lastYLocation","index","InfographicCanvas","element","fps","loop","language","planets","requestAnimationFrameId","MIN_PLANET_SIZE","MAX_PLANET_SIZE","frameCount","backgroundLoopMax","hoveredPlanet","isSunHovered","currentFrontierColor","r","g","b","render","clear","drawScene","setTimeout","requestAnimationFrame","bind","KOREAN","initialize","isAnyPlanetHovered","distanceToSun","clientX","clientY","distance","setIsPopupOpen","component","popupWidth","maxHeight","minHeight","topLeftPoint","popupHeight","titleMarginTop","drawingStartPoint","borderRadius","arcTo","drawRoundRect","getRGBFromForeColor","parseInt","update","frontierDataList","sort","a","queriedData","find","volume","price","support","resistance","logoImg","mfi","onMouseMove","addEventListener","devicePixelRatio","style","setWidth","setHeight","scale","fillRect","drawBackground","drawGalaxyComponents","drawPopup","clearRect","Infographic","canvasRef","useRef","divRef","infographicCanvasRef","useContext","setTime","toast","icon","fontFamily","background","notify","handleWheel","event","isDeltaPositive","deltaY","isDeltaOverFifty","_2035","window","removeEventListener","current","updatedData","updatePlanets","infographicCanvas","setSun","setPlanet","onResize","rect","getBoundingClientRect","setSize","backgroundColor","ref","display","justifyContent","zIndex","flexWrap","marginTop","padding","Array","from","alignItems","cursor","onClick","border","App","flexDirection","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById"],"mappings":"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","file":"static/js/main.97905cd5.chunk.js","sourcesContent":["var map = {\n\t\"./en/index\": 34\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 75;","import Papa from \"papaparse\";\n\nasync function fetchCsv(fileName: string) {\n  const response = await fetch(`${process.env.PUBLIC_URL}/data/${fileName}`);\n  const reader = response.body!.getReader();\n  const result = await reader.read();\n  const decoder = new TextDecoder(\"utf-8\");\n  const csv = await decoder.decode(result.value);\n  return csv;\n}\nexport async function GetData(fileName: string) {\n  const data = Papa.parse(await fetchCsv(fileName));\n  return data;\n}\n","import { ICandleDayReturnProps } from \"node-upbit/lib/@types/quotation\";\n\nenum CandleTrend {\n  RED = \"RED\", //red means upward\n  BLUE = \"BLUE\", //blue means downward\n}\n\nexport const calcSupportResistance = (\n  candles: Array<ICandleDayReturnProps>\n): { support: Array<number>; resistance: Array<number> } => {\n  const resistance: Array<number> = [];\n  const support: Array<number> = [];\n  const dateAscendingCandle =\n    new Date(candles[0].candle_date_time_utc).getTime() -\n      new Date(candles[candles.length - 1].candle_date_time_utc).getTime() >\n    0\n      ? [...candles].reverse()\n      : candles;\n  // dateAscendingCandle.pop(); // we do not need today's candle (the last one)\n  const trade_volume = dateAscendingCandle.map(\n    (el) => el.candle_acc_trade_volume\n  );\n\n  const priceRange = 4;\n\n  const volumeAverageInterval = 10;\n\n  outerLoop: for (let i = 0; i < dateAscendingCandle.length; i++) {\n    if (\n      i - volumeAverageInterval < 0 ||\n      i + volumeAverageInterval > dateAscendingCandle.length\n    ) {\n      continue;\n    }\n    const candle = dateAscendingCandle[i];\n    const currentDayHighPrice = candle.high_price;\n    const currentDayLowPrice = candle.low_price;\n    const trade_volume_average =\n      dateAscendingCandle\n        .slice(i - volumeAverageInterval, i)\n        .map((el) => el.candle_acc_trade_volume)\n        .reduce((a, b) => a + b, 0) / volumeAverageInterval;\n    if (support.length !== 0) {\n      if (currentDayLowPrice < support[support.length - 1]) {\n        // if the price goes lower than the support, the support will be the new resistance\n        const prevSupport = support.pop()!;\n        resistance.push(prevSupport);\n      }\n    }\n    if (resistance.length !== 0) {\n      if (currentDayHighPrice > resistance[resistance.length - 1]) {\n        // if the price goes higher than the resistance, the resistance will be the new support\n        const prevResistance = resistance.pop()!;\n        support.push(prevResistance);\n      }\n    }\n\n    if (trade_volume[i] < trade_volume_average) {\n      // pass the candle that has low trade volume\n      continue;\n    }\n\n    if (\n      i - Math.floor(priceRange / 2) < 0 ||\n      i + Math.floor(priceRange / 2) > dateAscendingCandle.length\n    ) {\n      continue;\n    }\n\n    const leftCandles: Array<ICandleDayReturnProps> = [];\n    const rightCandles: Array<ICandleDayReturnProps> = [];\n    for (let a = 1; a <= Math.floor(priceRange / 2); a++) {\n      leftCandles.unshift(dateAscendingCandle[i - a]);\n      rightCandles.push(dateAscendingCandle[i + a]);\n    }\n    let leftTrend: CandleTrend | null = null;\n    let rightTrend: CandleTrend | null = null;\n    const leftCandlesHighLowPrices = { high: 0, low: Number.MAX_VALUE };\n    const rightCandlesHighLowPrices = { high: 0, low: Number.MAX_VALUE };\n    for (const leftCandle of leftCandles) {\n      if (!leftCandle) {\n        continue outerLoop;\n      }\n      const candleOpenPriceSubtractedByClosingPrice =\n        leftCandle.opening_price - leftCandle.trade_price;\n      let finalTrend: CandleTrend;\n      finalTrend =\n        candleOpenPriceSubtractedByClosingPrice > 0\n          ? CandleTrend.BLUE\n          : CandleTrend.RED;\n\n      if (leftTrend !== null && leftTrend !== finalTrend) {\n        continue outerLoop;\n      }\n\n      leftTrend = finalTrend;\n\n      if (leftCandlesHighLowPrices.high < leftCandle.high_price) {\n        leftCandlesHighLowPrices.high = leftCandle.high_price;\n      }\n      if (leftCandlesHighLowPrices.low > leftCandle.low_price) {\n        leftCandlesHighLowPrices.low = leftCandle.low_price;\n      }\n    }\n\n    for (const rightCandle of rightCandles) {\n      if (!rightCandle) {\n        continue outerLoop;\n      }\n      const candleOpenPriceSubtractedByClosingPrice =\n        rightCandle.opening_price - rightCandle.trade_price;\n      let finalTrend: CandleTrend;\n      finalTrend =\n        candleOpenPriceSubtractedByClosingPrice > 0\n          ? CandleTrend.BLUE\n          : CandleTrend.RED;\n      if (rightTrend !== null && rightTrend !== finalTrend) {\n        continue outerLoop;\n      }\n\n      rightTrend = finalTrend;\n\n      if (rightCandlesHighLowPrices.high < rightCandle.high_price) {\n        rightCandlesHighLowPrices.high = rightCandle.high_price;\n      }\n      if (rightCandlesHighLowPrices.low > rightCandle.low_price) {\n        rightCandlesHighLowPrices.low = rightCandle.low_price;\n      }\n    }\n    if (rightTrend === leftTrend) {\n      continue;\n    }\n    if (leftTrend === CandleTrend.RED && rightTrend === CandleTrend.BLUE) {\n      // there is a possibility that the price is a resistance\n      if (\n        currentDayHighPrice < leftCandlesHighLowPrices.high ||\n        currentDayHighPrice < rightCandlesHighLowPrices.high\n      ) {\n        continue;\n      }\n      resistance.push(currentDayHighPrice);\n    } else {\n      // there is a possibility that the price is a support\n      if (\n        currentDayLowPrice > leftCandlesHighLowPrices.low ||\n        currentDayLowPrice > rightCandlesHighLowPrices.low\n      ) {\n        continue;\n      }\n      support.push(currentDayLowPrice);\n    }\n  }\n  return { support, resistance };\n};\n","import { createContext, useEffect, useState } from \"react\";\nimport Papa from \"papaparse\";\nimport { GetData } from \"utils/csv\";\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport interface FrontierTimeSeriesData {\n  time: string;\n  content: string;\n}\nexport interface FrontierData {\n  name: string;\n  frontier: string;\n  buzz: number;\n  type: string;\n  now: string;\n  2025: string;\n  2030: string;\n  2040: string;\n  2050: string;\n  beyond: string;\n  sources: string; // separated by comma\n  urls: string[]; //starting from index 12\n  // last index is 19\n  color: string;\n}\n\nexport const ExampleColorPallet = [\n  \"rgb(155,95,224)\", //155, 95, 224\n  \"rgb(22,164,216)\", //22, 164, 216\n  \"rgb(96,219,232)\", //96, 219, 232\n  \"rgb(139,211,70)\", //139, 211, 70\n  \"rgb(239,223,72)\", //239, 223, 72\n  \"rgb(249,165,44)\", //249, 165, 44\n  \"rgb(214,78,18)\", //214, 78, 18\n];\n\ninterface FrontiersContextElements {\n  frontiers: Map<string, FrontierData[]>;\n  currentFrontier: {\n    title: string;\n    data: FrontierData[];\n    avgBuzz: number;\n    totalBuzz: number;\n    color: string;\n  } | null;\n  changeFrontier: (frontierName: string) => void;\n  minMaxAvgBuzz:\n    | {\n        min: number;\n        max: number;\n      }\n    | undefined;\n  minMaxTotalBuzz:\n    | {\n        min: number;\n        max: number;\n      }\n    | undefined;\n}\n\nconst FrontiersContext = createContext<FrontiersContextElements>(\n  {} as FrontiersContextElements\n);\n\nconst FrontiersContextProvider: React.FC<Props> = ({ children }) => {\n  const [frontiers, setFrontiers] = useState<Map<string, FrontierData[]>>(\n    new Map()\n  );\n  const [minMaxAvgBuzz, setMinMaxAvgBuzz] = useState<{\n    min: number;\n    max: number;\n  }>();\n  const [minMaxTotalBuzz, setMinMaxTotalBuzz] = useState<{\n    min: number;\n    max: number;\n  }>();\n  const [currentFrontier, setCurrentFrontier] = useState<{\n    title: string;\n    data: FrontierData[];\n    avgBuzz: number;\n    totalBuzz: number;\n    color: string;\n  } | null>(null);\n  const changeFrontier = (frontierName: string) => {\n    const data = frontiers.get(frontierName);\n\n    if (data) {\n      console.log(\"data\", data[0].color);\n      setCurrentFrontier({\n        title: frontierName,\n        data,\n        avgBuzz: data.reduce((acc, curr) => {\n          if (curr.buzz) {\n            return acc + curr.buzz / data.length;\n          } else {\n            return acc;\n          }\n        }, 0),\n        totalBuzz: data.reduce((acc, curr) => {\n          if (curr.buzz) {\n            return acc + curr.buzz;\n          } else {\n            return acc;\n          }\n        }, 0),\n        color: data[0].color,\n      });\n    }\n  };\n  useEffect(() => {\n    GetData(\"frontiers.csv\").then((res) => {\n      const frontierSet = new Set<string>();\n      const frontierData: FrontierData[] = [];\n      let frontiersCount = 0;\n\n      for (let i = 1; i < res.data.length; i++) {\n        const row = res.data[i] as any;\n        const name = row[0];\n        const frontier = row[1];\n        if (!frontierSet.has(frontier)) {\n          frontiersCount++;\n        }\n        const buzz = row[2];\n        const type = row[3];\n        const now = row[4];\n        const _2025 = row[5];\n        const _2030 = row[6];\n        const _2040 = row[7];\n        const _2050 = row[8];\n        const beyond = row[9];\n        const sources = row[10];\n        const urls = row.slice(11, 19);\n        const data: FrontierData = {\n          name,\n          frontier,\n          buzz: Number(buzz.replace(/,/g, \"\")),\n          type,\n          now,\n          \"2025\": _2025,\n          \"2030\": _2030,\n          \"2040\": _2040,\n          \"2050\": _2050,\n          beyond,\n          sources,\n          urls,\n          color: ExampleColorPallet[frontiersCount % ExampleColorPallet.length],\n        };\n        if (frontier) {\n          frontierSet.add(frontier);\n        }\n        frontierData.push(data);\n      }\n      let maxAvg = 0;\n      let minAvg = Number.MAX_VALUE;\n      let maxTotalBuzz = 0;\n      let minTotalBuzz = Number.MAX_VALUE;\n      for (\n        let it = frontierSet.values(), val: string = \"\";\n        (val = it.next().value);\n\n      ) {\n        const filtered = frontierData.filter((d) => d.frontier === val);\n        const avgBuzz = filtered.reduce((acc, curr) => {\n          if (curr.buzz) {\n            return acc + curr.buzz / filtered.length;\n          } else {\n            return acc;\n          }\n        }, 0);\n        const totalBuzz = filtered.reduce((acc, curr) => {\n          if (curr.buzz) {\n            return acc + curr.buzz;\n          } else {\n            return acc;\n          }\n        }, 0);\n        if (avgBuzz > maxAvg) {\n          maxAvg = avgBuzz;\n        }\n        if (avgBuzz < minAvg) {\n          minAvg = avgBuzz;\n        }\n        if (totalBuzz > maxTotalBuzz) {\n          maxTotalBuzz = totalBuzz;\n        }\n        if (totalBuzz < minTotalBuzz) {\n          minTotalBuzz = totalBuzz;\n        }\n\n        setFrontiers((prev) => {\n          const newMap = new Map(prev);\n          newMap.set(\n            val,\n            filtered.map((d) => ({ ...d, avgBuzz: avgBuzz }))\n          );\n          return newMap;\n        });\n      }\n      setMinMaxTotalBuzz({ min: minTotalBuzz, max: maxTotalBuzz });\n      setMinMaxAvgBuzz({ min: minAvg, max: maxAvg });\n    });\n  }, []);\n\n  useEffect(() => {\n    const allFrontierData = frontiers.values();\n    const firstFrontier = allFrontierData.next().value;\n    if (firstFrontier) {\n      setCurrentFrontier({\n        title: firstFrontier[0].frontier,\n        data: firstFrontier,\n        avgBuzz: firstFrontier.reduce((acc: any, curr: any) => {\n          if (curr.buzz) {\n            return acc + curr.buzz / firstFrontier.length;\n          } else {\n            return acc;\n          }\n        }, 0),\n        totalBuzz: firstFrontier.reduce((acc: any, curr: any) => {\n          if (curr.buzz) {\n            return acc + curr.buzz;\n          } else {\n            return acc;\n          }\n        }, 0),\n        color: firstFrontier[0].color,\n      });\n    }\n    // setCurrentFrontier(frontiers)\n  }, [frontiers, setCurrentFrontier]);\n\n  return (\n    <FrontiersContext.Provider\n      value={{\n        frontiers,\n        currentFrontier,\n        changeFrontier,\n        minMaxAvgBuzz,\n        minMaxTotalBuzz,\n      }}\n    >\n      {children}\n    </FrontiersContext.Provider>\n  );\n};\n\nexport { FrontiersContext, FrontiersContextProvider };\n","import { getDayCandles, getTicker } from \"api/upbit\";\nimport { ICandleDayReturnProps } from \"node-upbit/lib/@types/quotation\";\nimport { createContext, useCallback, useEffect, useState } from \"react\";\nimport { calcCorrelationCoefficient } from \"utils/quant/correlation\";\nimport { calcIncreaseRatioOfMA } from \"utils/quant/movingAverage\";\nimport { CoinGeckoSingleMarketData } from \"types/coingecko.res\";\nimport { calcSupportResistance } from \"utils/quant/support-resistance\";\nimport { CoinGeckoSimplifiedJson } from \"./CoinGeckoReal\";\nimport { calcRSI } from \"utils/quant/rsi\";\nimport { calcMFI } from \"utils/quant/mfi\";\n\nexport enum Language {\n  KOREAN = \"ko\",\n  ENGLISH = \"en\",\n}\ninterface Props {\n  children: React.ReactNode;\n}\n\ninterface CryptoContextElements {\n  cryptoData: Map<string, CryptoDataFields> | undefined;\n  markets: Array<string>;\n  language: Language;\n  setLanguage: React.Dispatch<React.SetStateAction<Language>>;\n}\n\nconst CryptoContext = createContext<CryptoContextElements>(\n  {} as CryptoContextElements\n);\n\nexport type CryptoDataFields = {\n  increaseRatio: number;\n  support?: Array<number>;\n  resistance?: Array<number>;\n  currentPrice: number;\n  coefficient?: number;\n  volume: number;\n  rsi: number;\n  mfi: number;\n  logoImg: string;\n  foreColor: string;\n  backColor: string;\n};\n\nconst CryptoContextProvider: React.FC<Props> = ({ children }) => {\n  const [cryptoData, setCryptoData] = useState<Map<string, CryptoDataFields>>(\n    new Map()\n  );\n  const [language, setLanguage] = useState<Language>(Language.KOREAN);\n  const [sunCrypto, setSunCrypto] = useState<string>(\"KRW-BTC\");\n  const [markets, setMarkets] = useState<Array<string>>([\n    \"KRW-ETH\",\n    \"KRW-DOGE\",\n    \"KRW-BCH\",\n    \"KRW-ANKR\",\n    \"KRW-STX\",\n    \"KRW-MATIC\",\n    \"KRW-AAVE\",\n    \"KRW-LINK\",\n    \"KRW-XRP\",\n    \"KRW-CELO\",\n    \"KRW-EOS\",\n    \"KRW-ALGO\",\n    \"KRW-XTZ\",\n    \"KRW-ATOM\",\n    \"KRW-ENJ\",\n    \"KRW-SOL\",\n    \"KRW-NU\",\n    \"KRW-KNC\",\n    \"KRW-ETC\",\n    \"KRW-MANA\",\n    \"KRW-SAND\",\n  ]);\n  const retrieveOtherCryptoData = useCallback(\n    async (\n      market: string,\n      dayCount: number,\n      btcDayCandles: ICandleDayReturnProps[],\n      coinMarketData: Array<\n        CoinGeckoSingleMarketData & {\n          foreColor: string;\n          backColor: string;\n          logoImg: string;\n        }\n      >\n    ) => {\n      const symbol = market.split(\"-\")[1].toLowerCase();\n      const coinMarket = coinMarketData.find(\n        (market) => market.symbol === symbol\n      );\n      if (!coinMarket) return;\n      const volume = coinMarket.market_cap;\n      const otherCryptoDayCandles = await getDayCandles(market, dayCount);\n      otherCryptoDayCandles.pop();\n      const increaseRatio = calcIncreaseRatioOfMA(\n        otherCryptoDayCandles.slice(-10),\n        5\n      );\n      const coefficient = calcCorrelationCoefficient(\n        btcDayCandles.slice(-10),\n        otherCryptoDayCandles.slice(-10)\n      );\n      const { support, resistance } = calcSupportResistance(\n        otherCryptoDayCandles\n      );\n      const rsi = calcRSI(otherCryptoDayCandles);\n      // console.log(\n      //   \"increase\",\n      //   increaseRatio,\n      //   \"relation\",\n      //   Math.abs(coefficient),\n      //   \"rsi\",\n      //   rsi,\n      //   symbol\n      // );\n      const mfi = calcMFI(otherCryptoDayCandles);\n      const ticker = await getTicker(market);\n      // setCryptoData((prev) => {\n      //   const newMap = new Map(prev);\n      //   newMap.set(market.replace(\"KRW-\", \"\"), {\n      //     increaseRatio,\n      //     coefficient,\n      //     volume,\n      //     currentPrice: ticker.trade_price,\n      //     support,\n      //     resistance,\n      //     rsi,\n      //     foreColor: coinMarket.foreColor,\n      //     backColor: coinMarket.backColor,\n      //     logoImg: coinMarket.logoImg,\n      //     mfi,\n      //   });\n      //   return newMap;\n      // });\n    },\n    []\n  );\n  const retrieveAllCryptoData = useCallback(\n    async (sunCrypto: string) => {\n      getDayCandles(sunCrypto, 30)\n        .then(async (res) => {\n          const btcCandles = res;\n          btcCandles.pop(); // we don't care the last candle(today candle)\n          const increaseRatio = calcIncreaseRatioOfMA(btcCandles.slice(-10), 5);\n          const sunCoinGeckoData = CoinGeckoSimplifiedJson.findIndex(\n            (element) =>\n              element.symbol === sunCrypto.split(\"-\")[1].toLowerCase()\n          );\n          const rsi = calcRSI(btcCandles);\n          if (sunCoinGeckoData === -1) {\n            throw Error(\"no sun data is undefined\");\n          }\n          const mfi = calcMFI(btcCandles);\n          const ticker = await getTicker(sunCrypto);\n          setCryptoData(\n            (prev) =>\n              new Map([\n                ...prev,\n                [\n                  \"KRW-BTC\",\n                  {\n                    increaseRatio,\n                    foreColor:\n                      CoinGeckoSimplifiedJson[sunCoinGeckoData].foreColor,\n                    backColor:\n                      CoinGeckoSimplifiedJson[sunCoinGeckoData].backColor,\n                    logoImg: CoinGeckoSimplifiedJson[sunCoinGeckoData].logoImg,\n                    volume:\n                      CoinGeckoSimplifiedJson[sunCoinGeckoData].market_cap,\n                    currentPrice: ticker.trade_price,\n                    rsi,\n                    mfi,\n                  },\n                ],\n              ])\n          );\n          const coinMarketData = CoinGeckoSimplifiedJson;\n          return { btcCandles, coinMarketData };\n        })\n        // we need btc data first to calculate others\n        .then(({ btcCandles, coinMarketData }) => {\n          markets.forEach((market) => {\n            retrieveOtherCryptoData(market, 200, btcCandles, coinMarketData);\n          });\n        })\n        .catch((err) => console.log(err));\n    },\n    [markets, retrieveOtherCryptoData]\n  );\n\n  const retrieveCurrentPrice = useCallback(async () => {\n    const sunTicker = await getTicker(sunCrypto);\n    const previousSunTicker = cryptoData.get(sunCrypto.replace(\"KRW-\", \"\"));\n\n    if (previousSunTicker) {\n      setCryptoData((prev) => {\n        const newMap = new Map(prev);\n        newMap.set(sunCrypto.replace(\"KRW-\", \"\"), {\n          ...previousSunTicker,\n          currentPrice: sunTicker.trade_price,\n        });\n        return newMap;\n      });\n    }\n\n    markets.forEach(async (market) => {\n      const ticker = await getTicker(market);\n      const previousData = cryptoData.get(market.replace(\"KRW-\", \"\"));\n      if (previousData) {\n        setCryptoData((prev) => {\n          const newMap = new Map(prev);\n          newMap.set(market.replace(\"KRW-\", \"\"), {\n            ...previousData,\n            currentPrice: ticker.trade_price,\n          });\n          return newMap;\n        });\n      }\n    });\n  }, [markets, cryptoData, sunCrypto]);\n\n  useEffect(() => {\n    retrieveAllCryptoData(sunCrypto);\n  }, [sunCrypto, retrieveAllCryptoData]);\n\n  useEffect(() => {\n    const longInterval = setInterval(() => {\n      retrieveAllCryptoData(sunCrypto);\n    }, 1000 * 60 * 30);\n    const shortInterval = setInterval(() => {\n      retrieveCurrentPrice();\n    }, 1000 * 60 * 2);\n    return () => {\n      clearInterval(longInterval);\n      clearInterval(shortInterval);\n    };\n  }, [retrieveAllCryptoData, retrieveCurrentPrice, sunCrypto]);\n\n  return (\n    <CryptoContext.Provider\n      value={{ cryptoData, markets, language, setLanguage }}\n    >\n      {children}\n    </CryptoContext.Provider>\n  );\n};\n\nexport { CryptoContext, CryptoContextProvider };\n","export default __webpack_public_path__ + \"static/media/aave.7e0cb55c.png\";","export default __webpack_public_path__ + \"static/media/algo.2147c30f.png\";","export default __webpack_public_path__ + \"static/media/atom.cfe887f0.png\";","export default __webpack_public_path__ + \"static/media/ankr.1c8b1fdd.png\";","export default __webpack_public_path__ + \"static/media/bch.1b5abb07.png\";","export default __webpack_public_path__ + \"static/media/btc.3383c108.png\";","export default __webpack_public_path__ + \"static/media/celo.2502ce7f.png\";","export default __webpack_public_path__ + \"static/media/doge.d2618921.png\";","export default __webpack_public_path__ + \"static/media/enj.cc029d9e.png\";","export default __webpack_public_path__ + \"static/media/eos.dc7f4468.png\";","export default __webpack_public_path__ + \"static/media/eth.971b61a2.png\";","export default __webpack_public_path__ + \"static/media/etc.0501bdeb.png\";","export default __webpack_public_path__ + \"static/media/knc.c75e25e5.png\";","export default __webpack_public_path__ + \"static/media/link.75364210.png\";","export default __webpack_public_path__ + \"static/media/matic.ac27d862.png\";","export default __webpack_public_path__ + \"static/media/nu.729045e9.png\";","export default __webpack_public_path__ + \"static/media/sol.5c349913.png\";","export default __webpack_public_path__ + \"static/media/stx.7b6b38ee.png\";","export default __webpack_public_path__ + \"static/media/xrp.58c157e1.png\";","export default __webpack_public_path__ + \"static/media/xtz.e4e840ab.png\";","export default __webpack_public_path__ + \"static/media/mana.01b96459.png\";","export default __webpack_public_path__ + \"static/media/sand.8cc60271.png\";","import { Vector2 } from \"./Vector2\";\nimport { Vector3 } from \"./Vector3\";\n\n//this is also an affine vector for vector3\nexport class Vector4 {\n  x: number;\n  y: number;\n  z: number;\n  w: number;\n\n  static One = new Vector4(1, 1, 1, 1);\n  static Zero = new Vector4(0, 0, 0, 0);\n  static UnitX = new Vector4(1, 0, 0, 0);\n  static UnitY = new Vector4(0, 1, 0, 0);\n  static UnitZ = new Vector4(0, 0, 1, 0);\n  static UnitW = new Vector4(0, 0, 0, 1);\n\n  constructor(x: number, y: number, z: number, w: number) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.z = z || 0;\n    this.w = w || 0;\n  }\n  add(v: Vector4) {\n    return new Vector4(this.x + v.x, this.y + v.y, this.z + v.z, this.w + v.w);\n  }\n  subtract(v: Vector4) {\n    return new Vector4(this.x - v.x, this.y - v.y, this.z - v.z, this.w - v.w);\n  }\n  negative(): Vector4 {\n    return new Vector4(-this.x, -this.y, -this.z, -this.w);\n  }\n  dot(v: Vector4): number {\n    return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n  }\n  clone(): Vector4 {\n    return new Vector4(this.x, this.y, this.z, this.w);\n  }\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n  scalarBy(n: number) {\n    return new Vector4(this.x * n, this.y * n, this.z * n, this.w * n);\n  }\n  equals(v: Vector4) {\n    return this.x === v.x && this.y === v.y && this.z === v.z && this.w === v.w;\n  }\n  toArray(): Array<number> {\n    return [this.x, this.y, this.z, this.w];\n  }\n  toVector2() {\n    return new Vector2(this.x, this.y);\n  }\n\n  toVector3() {\n    return new Vector3(this.x, this.y, this.z);\n  }\n  normalize() {\n    return this.scalarBy(1 / this.length());\n  }\n}\n","//https://evanw.github.io/lightgl.js/docs/vector.html\n\nimport { Vector2 } from \"./Vector2\";\nimport { Vector4 } from \"./Vector4\";\n\nexport class Vector3 {\n  x: number;\n  y: number;\n  z: number;\n\n  static One = new Vector3(1, 1, 1);\n  static Zero = new Vector3(0, 0, 0);\n  static UnitX = new Vector3(1, 0, 0);\n  static UnitY = new Vector3(0, 1, 0);\n  static UnitZ = new Vector3(0, 0, 1);\n  constructor(x: number, y: number, z: number) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.z = z || 0;\n  }\n  add(v: Vector3) {\n    return new Vector3(this.x + v.x, this.y + v.y, this.z + v.z);\n  }\n  subtract(v: Vector3) {\n    return new Vector3(this.x - v.x, this.y - v.y, this.z - v.z);\n  }\n  negative(): Vector3 {\n    return new Vector3(-this.x, -this.y, -this.z);\n  }\n  dot(v: Vector3): number {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  }\n  clone(): Vector3 {\n    return new Vector3(this.x, this.y, this.z);\n  }\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n  scalarBy(n: number) {\n    return new Vector3(this.x * n, this.y * n, this.z * n);\n  }\n  equals(v: Vector3) {\n    return this.x === v.x && this.y === v.y && this.z === v.z;\n  }\n  toAffine(isPoint: boolean): Vector4 {\n    return new Vector4(this.x, this.y, this.z, isPoint ? 1 : 0);\n  }\n  toArray(): Array<number> {\n    return [this.x, this.y, this.z];\n  }\n  toVector2() {\n    return new Vector2(this.x, this.y);\n  }\n  normalize() {\n    return this.scalarBy(1 / this.length());\n  }\n}\n","//https://evanw.github.io/lightgl.js/docs/vector.html\n\nimport { Vector3 } from \"./Vector3\";\n\nexport class Vector2 {\n  x: number;\n  y: number;\n\n  static One = new Vector2(1, 1);\n  static Zero = new Vector2(0, 0);\n  static UnitX = new Vector2(1, 0);\n  static UnitY = new Vector2(0, 1);\n  constructor(x: number, y: number) {\n    this.x = x || 0;\n    this.y = y || 0;\n  }\n  add(v: Vector2) {\n    return new Vector2(this.x + v.x, this.y + v.y);\n  }\n  subtract(v: Vector2) {\n    return new Vector2(this.x - v.x, this.y - v.y);\n  }\n  negative(): Vector2 {\n    return new Vector2(-this.x, -this.y);\n  }\n  dot(v: Vector2): number {\n    return this.x * v.x + this.y * v.y;\n  }\n  clone(): Vector2 {\n    return new Vector2(this.x, this.y);\n  }\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n  scalarBy(n: number) {\n    return new Vector2(this.x * n, this.y * n);\n  }\n  equals(v: Vector2) {\n    return this.x === v.x && this.y === v.y;\n  }\n  toAffine(isPoint: boolean): Vector3 {\n    return new Vector3(this.x, this.y, isPoint ? 1 : 0);\n  }\n  toArray(): Array<number> {\n    return [this.x, this.y];\n  }\n  normalize() {\n    return this.scalarBy(1 / this.length());\n  }\n  toScreenPointVector(): Vector2 {\n    return new Vector2(Math.floor(this.x), Math.floor(this.y));\n  }\n\n  squareDistanceTo(v: Vector2) {\n    return Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2);\n  }\n}\n","import { Vector2 } from \"./math/Vector2\";\n\nexport const convertCartesianToScreenPoint = (\n  canvas: HTMLCanvasElement,\n  cartesianPoint: Vector2,\n  dpr: number\n) => {\n  const screenPoint = cartesianPoint.add(\n    new Vector2(canvas.width / dpr / 2, canvas.height / dpr / 2)\n  );\n  return screenPoint;\n};\n","import { convertCartesianToScreenPoint } from \"utils/cartesian\";\nimport { Vector2 } from \"utils/math/Vector2\";\nimport { Rotator2D } from \"utils/rotator2d\";\nimport spaceship from \"../../assets/spaceship.png\";\nimport { Planet } from \"./Planet\";\n\nexport enum SpaceshipDirection {\n  IN = \"IN\",\n  OUT = \"OUT\",\n}\n\n// https://blog.naver.com/ivory82/220241862037\nexport class Spaceship {\n  canvas: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n  canvasEdgePosition: Vector2;\n  // currentPosition: Vector2;\n  progress: number;\n  direction: SpaceshipDirection;\n  imageElement: HTMLImageElement;\n  planetRotator: Rotator2D;\n  edgeRotator: Rotator2D;\n  planet: Planet;\n  id: string;\n  opacity: number;\n  position: Vector2;\n  startPosition: Vector2;\n  endPosition: Vector2;\n  progressIncreaseDelta: number;\n  isDestinationReached: boolean;\n  dpr: number;\n  constructor(\n    canvas: HTMLCanvasElement,\n    canvasEdgePosition: Vector2,\n    planetRotator: Rotator2D,\n    edgeRotator: Rotator2D,\n    planet: Planet,\n    direction: SpaceshipDirection,\n    id: string,\n    dpr: number\n  ) {\n    this.isDestinationReached = false;\n    this.id = id;\n    this.dpr = dpr;\n    this.progress = 0;\n    this.opacity = 0;\n    this.canvasEdgePosition = canvasEdgePosition;\n    this.canvas = canvas;\n    this.planet = planet;\n    this.progressIncreaseDelta = 1 + this.planet.speed * 3;\n    this.ctx = canvas.getContext(\"2d\")!;\n    this.planetRotator = planetRotator;\n    this.edgeRotator = edgeRotator;\n    this.direction = direction;\n    const img = new Image();\n    this.imageElement = img;\n    img.src = spaceship;\n    this.position =\n      this.direction === SpaceshipDirection.OUT\n        ? planet.position\n        : canvasEdgePosition;\n    if (this.direction === SpaceshipDirection.OUT) {\n      this.startPosition = planet.position;\n      this.endPosition = canvasEdgePosition;\n    } else {\n      this.startPosition = canvasEdgePosition;\n      this.endPosition = planet.position;\n    }\n\n    img.onload = () => {\n      this.draw();\n    };\n  }\n\n  drawTrajectory(angle: number, destinationPosition: Vector2) {\n    let trajectoryOpacity = this.opacity;\n    if (trajectoryOpacity > 0.5) {\n      trajectoryOpacity = 0.5;\n    }\n\n    const trajectoryStartingFrom =\n      this.direction === SpaceshipDirection.IN\n        ? this.position\n        : this.position.add(\n            new Vector2(Math.cos(angle), Math.sin(angle)).scalarBy(-80)\n          );\n    const trajectoryEndsAt =\n      this.direction === SpaceshipDirection.IN\n        ? this.position.add(\n            new Vector2(Math.cos(angle), Math.sin(angle)).scalarBy(80)\n          )\n        : this.position;\n\n    let linePointingSpaceship = convertCartesianToScreenPoint(\n      this.canvas,\n      trajectoryStartingFrom,\n      this.dpr\n    );\n    const trailingPoint = convertCartesianToScreenPoint(\n      this.canvas,\n      trajectoryEndsAt,\n      this.dpr\n    );\n\n    if (this.isDestinationReached) {\n      linePointingSpaceship = convertCartesianToScreenPoint(\n        this.canvas,\n        destinationPosition,\n        this.dpr\n      );\n    }\n\n    if (\n      Math.sqrt(trajectoryEndsAt.squareDistanceTo(destinationPosition)) < 10\n    ) {\n      this.planet.removeSpaceShip(this.id);\n    }\n    this.ctx.save();\n\n    const grad = this.ctx.createLinearGradient(\n      trailingPoint.x,\n      trailingPoint.y,\n      linePointingSpaceship.x,\n      linePointingSpaceship.y\n    );\n    grad.addColorStop(\n      this.direction === SpaceshipDirection.IN ? 0 : 1,\n      `rgba(255, 255, 255, 0)`\n    );\n\n    // if (this.planet.rsi >= 70) {\n    //   grad.addColorStop(\n    //     this.direction === SpaceshipDirection.IN ? 1 : 0,\n    //     `rgba(255, 255, 77, 1)`\n    //   );\n    // } else {\n    //   grad.addColorStop(\n    //     this.direction === SpaceshipDirection.IN ? 1 : 0,\n    //     `rgba(255, 255, 255, ${trajectoryOpacity})`\n    //   );\n    // }\n    this.ctx.beginPath();\n    this.ctx.moveTo(linePointingSpaceship.x, linePointingSpaceship.y);\n    this.ctx.lineTo(trailingPoint.x, trailingPoint.y);\n\n    this.ctx.strokeStyle = grad;\n\n    this.ctx.stroke();\n    this.ctx.closePath();\n    this.ctx.restore();\n  }\n\n  drawSpaceshipImage(angle: number, destinationPosition: Vector2) {\n    if (destinationPosition.squareDistanceTo(this.position) < 10) {\n      this.isDestinationReached = true;\n    }\n\n    const correctedEdgePosition = convertCartesianToScreenPoint(\n      this.canvas,\n      this.direction === SpaceshipDirection.IN\n        ? this.canvasEdgePosition\n        : this.planet.position,\n      this.dpr\n    );\n    const imageWidth = this.imageElement.width / 25;\n    const imageHeight = this.imageElement.height / 25;\n    const imageHalfWidth = imageWidth / 2;\n    const imageHalfHeight = imageHeight / 2;\n\n    this.ctx.save();\n    if (this.direction === SpaceshipDirection.IN) {\n      this.ctx.translate(\n        -this.progress * Math.cos(angle),\n        -this.progress * Math.sin(angle)\n      );\n      this.position = this.canvasEdgePosition.subtract(\n        new Vector2(\n          this.progress * Math.cos(angle),\n          this.progress * Math.sin(angle)\n        )\n      );\n    } else {\n      this.ctx.translate(\n        this.progress * Math.cos(angle),\n        this.progress * Math.sin(angle)\n      );\n\n      this.ctx.fillStyle = \"yellow\";\n      this.position = this.planet.position.add(\n        new Vector2(\n          this.progress * Math.cos(angle),\n          this.progress * Math.sin(angle)\n        )\n      );\n    }\n    if (this.isDestinationReached) {\n      this.ctx.restore();\n      return;\n    }\n\n    // spaceship opacity\n    if (this.opacity < 1) {\n      this.opacity += 0.02;\n    }\n\n    // this part is for drawing center-rotated image\n    this.ctx.translate(\n      imageHalfWidth + correctedEdgePosition.x,\n      imageHalfHeight + correctedEdgePosition.y\n    );\n\n    this.ctx.translate(-imageHalfWidth, -imageHalfHeight);\n    if (this.direction === SpaceshipDirection.IN) {\n      this.ctx.rotate(-(-Math.PI / 2 - angle) + Math.PI);\n    } else {\n      this.ctx.rotate(-(-Math.PI / 2 - angle));\n    }\n\n    this.ctx.globalAlpha = this.opacity;\n    this.ctx.drawImage(\n      this.imageElement,\n      -imageHalfWidth,\n      -imageHalfHeight,\n      imageWidth,\n      imageHeight\n    );\n    this.ctx.restore();\n  }\n\n  draw() {\n    this.progress += this.progressIncreaseDelta;\n    const dx = this.canvasEdgePosition.x - this.planet.position.x;\n    const dy = this.canvasEdgePosition.y - this.planet.position.y;\n    const angle = Math.atan2(dy, dx);\n    const destinationPosition =\n      this.direction === SpaceshipDirection.OUT\n        ? this.canvasEdgePosition\n        : this.planet.position;\n\n    this.drawTrajectory(angle, destinationPosition);\n    this.drawSpaceshipImage(angle, destinationPosition);\n  }\n  setDpr(dpr: number) {\n    this.dpr = dpr;\n  }\n}\n","export const clamp = (value: number, min: number, max: number) => {\n  return Math.max(min, Math.min(value, max));\n};\n\nexport const changeRelativeValueToRealValue = (\n  value: number,\n  inputMin: number,\n  inputMax: number,\n  returnMin: number,\n  returnMax: number\n) => {\n  let relativeValue = value;\n  if (relativeValue > inputMax) {\n    relativeValue = inputMax;\n  }\n  if (relativeValue < inputMin) {\n    relativeValue = inputMin;\n  }\n  // this relativeInputValue will be a value between 0 and 1 always\n  const relativeInputValue = (relativeValue - inputMin) / (inputMax - inputMin);\n\n  return relativeInputValue * (returnMax - returnMin) + returnMin;\n};\n\nexport const changeRelativeValueToRealValueInversed = (\n  value: number,\n  inputMin: number,\n  inputMax: number,\n  returnMin: number,\n  returnMax: number\n) => {\n  let relativeValue = value;\n  if (relativeValue > inputMax) {\n    relativeValue = inputMax;\n  }\n  if (relativeValue < inputMin) {\n    relativeValue = inputMin;\n  }\n  // this relativeInputValue will be a value between 0 and 1 always\n  const relativeInputValue =\n    1 - (relativeValue - inputMin) / (inputMax - inputMin);\n\n  return relativeInputValue * (returnMax - returnMin) + returnMin;\n};\n","export const wrapText = function (\n  ctx: CanvasRenderingContext2D,\n  text: string,\n  x: number,\n  y: number,\n  maxWidth: number,\n  lineHeight: number\n) {\n  // First, start by splitting all of our text into words, but splitting it into an array split by spaces\n  let words = text.split(\" \");\n  let line = \"\"; // This will store the text of the current line\n  let testLine = \"\"; // This will store the text when we add a word, to test if it's too long\n  let lineArray = []; // This is an array of lines, which the function will return\n\n  // Lets iterate over each word\n  for (var n = 0; n < words.length; n++) {\n    // Create a test line, and measure it..\n    testLine += `${words[n]} `;\n    let metrics = ctx.measureText(testLine);\n    let testWidth = metrics.width;\n    // If the width of this test line is more than the max width\n    if (testWidth > maxWidth && n > 0) {\n      // Then the line is finished, push the current line into \"lineArray\"\n      lineArray.push([line, x, y]);\n      // Increase the line height, so a new line is started\n      y += lineHeight;\n      // Update line and test line to use this word as the first word on the next line\n      line = `${words[n]} `;\n      testLine = `${words[n]} `;\n    } else {\n      // If the test line is still less than the max width, then add the word to the current line\n      line += `${words[n]} `;\n    }\n    // If we never reach the full max width, then there is only one line.. so push it into the lineArray so we return something\n    if (n === words.length - 1) {\n      lineArray.push([line, x, y]);\n    }\n  }\n  // Return the line array\n  return lineArray;\n};\n","import { Vector2 } from \"./Vector2\";\n\nexport class Matrix2x2 {\n  Cols: Array<Vector2>;\n\n  constructor(\n    InCol0: Vector2 = Vector2.UnitX,\n    InCol1: Vector2 = Vector2.UnitY\n  ) {\n    this.Cols = [InCol0, InCol1];\n  }\n  transpose() {\n    return new Matrix2x2(\n      new Vector2(this.Cols[0].x, this.Cols[1].x),\n      new Vector2(this.Cols[0].y, this.Cols[1].y)\n    );\n  }\n\n  add(m: Matrix2x2) {\n    const col_1 = this.Cols[0].add(m.Cols[0]);\n    const col_2 = this.Cols[1].add(m.Cols[1]);\n    return new Matrix2x2(col_1, col_2);\n  }\n  subtract(m: Matrix2x2) {\n    const col_1 = this.Cols[0].subtract(m.Cols[0]);\n    const col_2 = this.Cols[1].subtract(m.Cols[1]);\n    return new Matrix2x2(col_1, col_2);\n  }\n  scalarBy(x: number) {\n    return new Matrix2x2(this.Cols[0].scalarBy(x), this.Cols[1].scalarBy(x));\n  }\n  negative() {\n    const col_1 = this.Cols[0].negative();\n    const col_2 = this.Cols[1].negative();\n    return new Matrix2x2(col_1, col_2);\n  }\n  determinant() {\n    return this.Cols[0].x * this.Cols[1].y - this.Cols[0].y - this.Cols[1].x;\n  }\n\n  multiplyMatrix(m: Matrix2x2) {\n    const transposedMatrix = this.transpose();\n    return new Matrix2x2(\n      new Vector2(\n        transposedMatrix.Cols[0].dot(m.Cols[0]),\n        transposedMatrix.Cols[1].dot(m.Cols[0])\n      ),\n      new Vector2(\n        transposedMatrix.Cols[0].dot(m.Cols[1]),\n        transposedMatrix.Cols[1].dot(m.Cols[1])\n      )\n    );\n  }\n\n  multiplyVector(v: Vector2) {\n    const transposedMatrix = this.transpose();\n    return new Vector2(\n      transposedMatrix.Cols[0].dot(v),\n      transposedMatrix.Cols[1].dot(v)\n    );\n  }\n}\n","import { Matrix2x2 } from \"./Matrix2x2\";\nimport { Vector3 } from \"./Vector3\";\n\nexport class Matrix3x3 {\n  Cols: Array<Vector3>;\n\n  constructor(\n    InCol0: Vector3 = Vector3.UnitX,\n    InCol1: Vector3 = Vector3.UnitY,\n    InCol2: Vector3 = Vector3.UnitZ\n  ) {\n    this.Cols = [InCol0, InCol1, InCol2];\n  }\n\n  transpose() {\n    return new Matrix3x3(\n      new Vector3(this.Cols[0].x, this.Cols[1].x, this.Cols[2].x),\n      new Vector3(this.Cols[0].y, this.Cols[1].y, this.Cols[2].y),\n      new Vector3(this.Cols[0].z, this.Cols[1].z, this.Cols[2].z)\n    );\n  }\n\n  add(m: Matrix3x3) {\n    const col_1 = this.Cols[0].add(m.Cols[0]);\n    const col_2 = this.Cols[1].add(m.Cols[1]);\n    const col_3 = this.Cols[2].add(m.Cols[2]);\n    return new Matrix3x3(col_1, col_2, col_3);\n  }\n  subtract(m: Matrix3x3) {\n    const col_1 = this.Cols[0].subtract(m.Cols[0]);\n    const col_2 = this.Cols[1].subtract(m.Cols[1]);\n    const col_3 = this.Cols[2].subtract(m.Cols[2]);\n    return new Matrix3x3(col_1, col_2, col_3);\n  }\n\n  scalarBy(x: number) {\n    return new Matrix3x3(\n      this.Cols[0].scalarBy(x),\n      this.Cols[1].scalarBy(x),\n      this.Cols[2].scalarBy(x)\n    );\n  }\n\n  negative() {\n    const col_1 = this.Cols[0].negative();\n    const col_2 = this.Cols[1].negative();\n    const col_3 = this.Cols[2].negative();\n    return new Matrix3x3(col_1, col_2, col_3);\n  }\n\n  determinant() {}\n\n  multiplyMatrix(m: Matrix3x3) {\n    const transposedMatrix = this.transpose();\n    return new Matrix3x3(\n      new Vector3(\n        transposedMatrix.Cols[0].dot(m.Cols[0]),\n        transposedMatrix.Cols[1].dot(m.Cols[0]),\n        transposedMatrix.Cols[2].dot(m.Cols[0])\n      ),\n      new Vector3(\n        transposedMatrix.Cols[0].dot(m.Cols[1]),\n        transposedMatrix.Cols[1].dot(m.Cols[1]),\n        transposedMatrix.Cols[2].dot(m.Cols[1])\n      ),\n      new Vector3(\n        transposedMatrix.Cols[0].dot(m.Cols[2]),\n        transposedMatrix.Cols[1].dot(m.Cols[2]),\n        transposedMatrix.Cols[2].dot(m.Cols[2])\n      )\n    );\n  }\n\n  multiplyVector(v: Vector3) {\n    const transposedMatrix = this.transpose();\n    return new Vector3(\n      transposedMatrix.Cols[0].dot(v),\n      transposedMatrix.Cols[1].dot(v),\n      transposedMatrix.Cols[2].dot(v)\n    );\n  }\n\n  toMatrix2x2() {\n    return new Matrix2x2(this.Cols[0].toVector2(), this.Cols[1].toVector2());\n  }\n}\n","import { Matrix2x2 } from \"./math/Matrix2x2\";\nimport { Matrix3x3 } from \"./math/Matrix3x3\";\nimport { Vector2 } from \"./math/Vector2\";\n\nexport class Rotator2D {\n  degree: number;\n  static getClampedValue(InDegree: number) {\n    let angle = InDegree % 360;\n    if (angle < 0) {\n      angle += 360;\n    }\n    return angle;\n  }\n  constructor(InDegree: number) {\n    this.degree = InDegree;\n  }\n  clamp() {\n    this.degree = Rotator2D.getClampedValue(this.degree);\n    return this.degree;\n  }\n  toRadian() {\n    this.clamp();\n    return (this.degree * Math.PI) / 180;\n  }\n  update(newDegree: number) {\n    this.degree = Rotator2D.getClampedValue(newDegree);\n  }\n  getRotateMatrix() {\n    const cos = Math.cos(this.toRadian());\n    const sin = Math.sin(this.toRadian());\n    const rotateMatrix: Matrix2x2 = new Matrix2x2(\n      new Vector2(cos, sin),\n      new Vector2(-sin, cos)\n    );\n    return rotateMatrix;\n  }\n  getRotateAffineMatrix() {\n    const cos = Math.cos(this.toRadian());\n    const sin = Math.sin(this.toRadian());\n    const rotateMatrix: Matrix3x3 = new Matrix3x3(\n      new Vector2(cos, sin).toAffine(false),\n      new Vector2(-sin, cos).toAffine(false),\n      undefined //UnitZ\n    );\n    return rotateMatrix;\n  }\n}\n","import { ExampleColorPallet, FrontiersContext } from \"context/FrontiersContext\";\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { InfographicCanvas } from \"./Canvas\";\n\nenum FrontierTime {\n  \"_2025\" = \"2025\",\n  \"_2030\" = \"2030\",\n  \"_2035\" = \"2035\",\n  \"_2040\" = \"2040\",\n  \"beyond\" = \"beyond\",\n}\nconst Infographic = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const divRef = useRef<HTMLDivElement>(null);\n  const infographicCanvasRef = useRef<InfographicCanvas | null>(null);\n\n  const {\n    frontiers,\n    changeFrontier,\n    currentFrontier,\n    minMaxAvgBuzz,\n    minMaxTotalBuzz,\n  } = useContext(FrontiersContext);\n\n  const notify = (time: string) =>\n    toast(`Timeline set to ${time}`, {\n      icon: \"👏\",\n      style: {\n        fontFamily: \"Roboto\",\n        borderRadius: \"10px\",\n        background: \"#333\",\n        color: \"#fff\",\n      },\n    });\n\n  const [time, setTime] = useState<FrontierTime>(FrontierTime._2025);\n\n  useEffect(() => {\n    notify(time);\n    const handleWheel = (event: WheelEvent) => {\n      const isDeltaPositive = event.deltaY < 0;\n      const isDeltaOverFifty = Math.abs(event.deltaY) > 20;\n      if (isDeltaPositive && isDeltaOverFifty) {\n        if (time === FrontierTime._2025) {\n          setTime(FrontierTime._2030);\n        } else if (time === FrontierTime._2030) {\n          setTime(FrontierTime._2035);\n        } else if (time === FrontierTime._2035) {\n          setTime(FrontierTime._2040);\n        } else if (time === FrontierTime._2040) {\n          setTime(FrontierTime.beyond);\n        }\n      } else if (!isDeltaPositive && isDeltaOverFifty) {\n        if (time === FrontierTime.beyond) {\n          setTime(FrontierTime._2040);\n        } else if (time === FrontierTime._2040) {\n          setTime(FrontierTime._2035);\n        } else if (time === FrontierTime._2035) {\n          setTime(FrontierTime._2030);\n        } else if (time === FrontierTime._2030) {\n          setTime(FrontierTime._2025);\n        }\n      }\n    };\n    window.addEventListener(\"wheel\", handleWheel);\n    return () => {\n      window.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, [time]);\n\n  useEffect(() => {\n    if (!infographicCanvasRef.current) {\n      return;\n    }\n    const sun = infographicCanvasRef.current.sun;\n    if (!sun) {\n      return;\n    }\n    if (time === sun.time) {\n      return;\n    }\n\n    infographicCanvasRef.current.sun!.update({\n      time,\n      totalBuzz: currentFrontier?.totalBuzz,\n    });\n    if (!currentFrontier) {\n      return;\n    }\n    const updatedData = currentFrontier.data.map((frontier) => ({\n      name: frontier.name,\n      content: frontier[time as \"2025\" | \"2030\" | \"2040\" | \"2050\" | \"beyond\"],\n    }));\n    infographicCanvasRef.current.updatePlanets(updatedData);\n  }, [time, currentFrontier]);\n\n  useEffect(() => {\n    if (!canvasRef.current) {\n      return () => {};\n    }\n    if (!infographicCanvasRef.current) {\n      const infographicCanvas = new InfographicCanvas(canvasRef.current);\n      infographicCanvasRef.current = infographicCanvas;\n    }\n  }, [frontiers]);\n\n  useEffect(() => {\n    if (!infographicCanvasRef.current) {\n      return;\n    }\n    if (!currentFrontier) {\n      return;\n    }\n    if (!minMaxAvgBuzz) {\n      return;\n    }\n    if (!minMaxTotalBuzz) {\n      return;\n    }\n    console.log(\"min\", minMaxAvgBuzz.min, \"max\", minMaxAvgBuzz.max);\n    console.log(\"avg\", currentFrontier.avgBuzz);\n    infographicCanvasRef.current.setSun(\n      currentFrontier.title,\n      currentFrontier.color,\n      \"#fff\",\n      FrontierTime._2025,\n      currentFrontier.totalBuzz,\n      minMaxTotalBuzz.min,\n      minMaxTotalBuzz.max\n    );\n    infographicCanvasRef.current.setPlanet(\n      currentFrontier.data,\n      FrontierTime._2025,\n      currentFrontier.totalBuzz\n    );\n  }, [currentFrontier, minMaxAvgBuzz, minMaxTotalBuzz]);\n\n  useEffect(() => {\n    const onResize = () => {\n      if (!divRef.current || !infographicCanvasRef.current) {\n        return;\n      }\n      const rect = divRef.current.getBoundingClientRect();\n      const dpr = window.devicePixelRatio;\n\n      infographicCanvasRef.current.setSize(rect.width, rect.height, dpr);\n      infographicCanvasRef.current.scale(dpr, dpr);\n      infographicCanvasRef.current.drawScene();\n    };\n\n    onResize();\n    window.addEventListener(\"resize\", onResize);\n    return () => {\n      window.removeEventListener(\"resize\", onResize);\n    };\n  }, []);\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        position: \"fixed\",\n        backgroundColor: \"black\",\n      }}\n      ref={divRef}\n    >\n      {/* <Toaster position=\"bottom-center\" /> */}\n      <div\n        style={{\n          position: \"absolute\",\n          width: \"calc(100% - 60px)\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          zIndex: 5,\n          flexWrap: \"wrap\",\n          marginTop: 20,\n          padding: \"0 30px\",\n        }}\n      >\n        {frontiers &&\n          Array.from(frontiers.keys()).map((frontier, index) => {\n            const frontierData = frontiers.get(frontier);\n            return (\n              <div\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  background: currentFrontier?.title === frontier ? \"#555\" : \"\",\n                  borderRadius: 5,\n                  padding: 5,\n                  cursor: \"pointer\",\n                }}\n                onClick={() => {\n                  changeFrontier(frontier);\n                }}\n              >\n                <div\n                  style={{\n                    width: 15,\n                    height: 15,\n                    backgroundColor: frontierData\n                      ? frontierData[0].color\n                      : \"white\",\n                  }}\n                ></div>\n                <button\n                  style={{\n                    background: \"none\",\n                    border: \"none\",\n                    color: \"white\",\n                    cursor: \"pointer\",\n                  }}\n                  key={frontier}\n                >\n                  {frontier}\n                </button>\n              </div>\n            );\n          })}\n      </div>\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default Infographic;\n","export default \"data:image/png;base64,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\"","import { CryptoDataFields } from \"context/CryptoContext\";\nimport {\n  changeRelativeValueToRealValue,\n  changeRelativeValueToRealValueInversed,\n} from \"utils/clamp\";\nimport { generateRandomName } from \"utils/generateRandomName\";\nimport { convertCartesianToScreenPoint } from \"../../utils/cartesian\";\nimport { Vector2 } from \"../../utils/math/Vector2\";\nimport { Rotator2D } from \"../../utils/rotator2d\";\nimport { Spaceship, SpaceshipDirection } from \"./Spaceship\";\nimport { Sun } from \"./Sun\";\nimport { returnRandomInRange } from \"utils/randomInRange\";\nimport Sentiment from \"sentiment\";\nimport { wrapText } from \"utils/text\";\n\nexport class Planet {\n  name: string;\n  canvas: HTMLCanvasElement;\n  rotator: Rotator2D;\n  radius: number;\n  position: Vector2;\n  speed: number;\n  distanceFromSun: number;\n  spaceShips: Array<Spaceship>;\n  ctx: CanvasRenderingContext2D;\n  greenness: number | null = null;\n  spaceShipDirection = SpaceshipDirection.IN;\n  //   spaceShipCount: number;\n  //   spaceShipDirection: SpaceshipDirection;\n  //   spaceShipRegenerationInterval: number;\n  foreColor: string;\n  // iceAgeImage: HTMLImageElement;\n  backColor: string;\n  isPopupOpen: boolean = false;\n  content: string;\n  canvasDrawPosition: Vector2;\n  dpr: number;\n  buzz: number;\n  maxBuzzIndex: number;\n  minBuzzIndex: number;\n  sentimentDegree: number;\n  sun: Sun;\n  constructor(\n    canvas: HTMLCanvasElement,\n    name: string,\n    content: string,\n    foreColor: string,\n    backColor: string,\n    maxBuzzIndex: number,\n    minBuzzIndex: number,\n    angleTiltRatio: number,\n    buzz: number,\n    dpr: number,\n    sun: Sun\n  ) {\n    this.name = name;\n    this.sun = sun;\n    this.buzz = buzz;\n    this.maxBuzzIndex = maxBuzzIndex;\n    this.minBuzzIndex = minBuzzIndex;\n    this.content = content;\n    this.foreColor = foreColor;\n    this.backColor = backColor;\n    this.canvas = canvas;\n    this.rotator = new Rotator2D(angleTiltRatio * 360);\n    this.radius = changeRelativeValueToRealValue(\n      buzz,\n      minBuzzIndex,\n      maxBuzzIndex,\n      60,\n      100\n    );\n    this.spaceShips = [];\n    this.ctx = this.canvas.getContext(\"2d\")!;\n    this.distanceFromSun = 300;\n    this.speed = 0.05;\n    this.dpr = dpr;\n\n    const sentiment = new Sentiment();\n    this.sentimentDegree = sentiment.analyze(this.content).score;\n    const positionAffineVector = new Vector2(this.distanceFromSun, 0).toAffine(\n      true\n    );\n    const rotateAffineMatrix = this.rotator.getRotateAffineMatrix();\n\n    this.position = rotateAffineMatrix\n      .multiplyVector(positionAffineVector)\n      .toVector2();\n    this.canvasDrawPosition = convertCartesianToScreenPoint(\n      this.canvas,\n      this.position,\n      this.dpr\n    );\n    // this.setSpaceShip();\n  }\n\n  update(data: Partial<{ title: string; time: string; content: string }>) {\n    if (data.content !== undefined) {\n      this.content = data.content;\n      const sentiment = new Sentiment();\n      this.sentimentDegree = sentiment.analyze(this.content).score;\n    }\n  }\n\n  setSpaceshipInformation(rsi: number) {\n    let spaceShipCount = 0;\n    let spaceShipDirection: SpaceshipDirection = SpaceshipDirection.IN;\n    let spaceShipRegenerationInterval = 20000;\n    if (rsi >= 70) {\n      spaceShipCount = 3;\n      spaceShipDirection = SpaceshipDirection.IN;\n      spaceShipRegenerationInterval = 1000;\n      // this.iceAgeImage.src = \"\";\n    } else if (60 <= rsi && rsi < 70) {\n      spaceShipCount = 1;\n      spaceShipDirection = SpaceshipDirection.IN;\n      spaceShipRegenerationInterval = 10000;\n      // this.iceAgeImage.src = \"\";\n    } else if (40 <= rsi && rsi < 60) {\n      spaceShipCount = 0;\n      spaceShipDirection = SpaceshipDirection.OUT;\n      spaceShipRegenerationInterval = 20000;\n      // this.iceAgeImage.src =\n      // iceAgeLevel1[Math.floor(Math.random() * iceAgeLevel1.length)];\n    } else if (30 <= rsi && rsi < 40) {\n      spaceShipCount = 1;\n      spaceShipDirection = SpaceshipDirection.OUT;\n      spaceShipRegenerationInterval = 10000;\n      // this.iceAgeImage.src =\n      // iceAgeLevel2[Math.floor(Math.random() * iceAgeLevel2.length)];\n    } else {\n      spaceShipCount = 3;\n      spaceShipDirection = SpaceshipDirection.OUT;\n      spaceShipRegenerationInterval = 1000;\n      // this.iceAgeImage.src =\n      // iceAgeLevel3[Math.floor(Math.random() * iceAgeLevel3.length)];\n    }\n    return {\n      spaceShipCount,\n      spaceShipDirection,\n      spaceShipRegenerationInterval,\n    };\n  }\n\n  calcSpeed(increaseRatio: number) {\n    const maxSpeed = 0.3;\n    const minSpeed = 0.02;\n\n    const speed = changeRelativeValueToRealValue(\n      increaseRatio,\n      0,\n      1,\n      minSpeed,\n      maxSpeed\n    );\n    return speed;\n  }\n\n  calcDistanceFromSun(correlationCoefficient: number) {\n    const minDistance = this.sun.radius + 30 + this.radius;\n    const maxDistance = (this.canvas.height + 260) / this.dpr / 2;\n\n    const relativeToRadian = changeRelativeValueToRealValueInversed(\n      // the bigger the correlation coefficient\n      // the more similar is it to the sun\n      correlationCoefficient,\n      -0.001,\n      0.1,\n      (Math.PI * 85) / 180,\n      (Math.PI * 89.9) / 180\n    );\n    // ln x derivative is 1/x\n    const tanOfRadian = Math.tan(relativeToRadian);\n\n    const distance = changeRelativeValueToRealValue(\n      // the bigger the correlation coefficient\n      // the more similar is it to the sun\n      tanOfRadian,\n      Math.tan((Math.PI * 85) / 180),\n      Math.tan((Math.PI * 89.9) / 180),\n      minDistance,\n      maxDistance\n    );\n    return distance;\n  }\n\n  getCanvasOuterTrajectoryPoint() {\n    const rotatorAdvanceAmount = 20;\n    const bandWidthDegree = 3;\n    const minRotatorDegree =\n      this.rotator.degree + rotatorAdvanceAmount - bandWidthDegree;\n    const maxRotatorDegree =\n      this.rotator.degree + rotatorAdvanceAmount + bandWidthDegree;\n    const criterionRotator = new Rotator2D(\n      Math.random() * (maxRotatorDegree - minRotatorDegree) + minRotatorDegree\n      // Math.random() *\n      //   (this.rotator.degree +\n      //     bandWidthDegree -\n      //     //this can be a number like 370\n      //     (this.rotator.degree - bandWidthDegree) +\n      //     this.rotator.degree -\n      //     bandWidthDegree)\n    );\n    let quadrant = 0b00; //1st qudrant\n\n    if (criterionRotator.degree <= 90 && criterionRotator.degree >= 0) {\n      quadrant = 0b00;\n    } else if (criterionRotator.degree <= 180) {\n      quadrant = 0b01;\n    } else if (criterionRotator.degree <= 270) {\n      quadrant = 0b11;\n    } else {\n      quadrant = 0b10;\n    }\n    criterionRotator.clamp();\n\n    const canvasEdgeStartPointOffset = 100;\n    const isBoundToY = Math.abs(Math.tan(criterionRotator.toRadian())) > 1;\n    if (isBoundToY) {\n      const y =\n        quadrant <= 0b01\n          ? (this.canvas.height + canvasEdgeStartPointOffset) / 2\n          : -(this.canvas.height + canvasEdgeStartPointOffset) / 2;\n      const x = y / Math.tan(criterionRotator.toRadian());\n      return { edgePosition: new Vector2(x, y), edgeRotator: criterionRotator };\n    } else {\n      const x =\n        quadrant % 2 === 0\n          ? (this.canvas.width + canvasEdgeStartPointOffset) / 2\n          : -(this.canvas.width + canvasEdgeStartPointOffset) / 2;\n      const y = Math.tan(criterionRotator.toRadian()) * x;\n      return { edgePosition: new Vector2(x, y), edgeRotator: criterionRotator };\n    }\n  }\n  setSpaceShip() {\n    const { edgePosition, edgeRotator } = this.getCanvasOuterTrajectoryPoint();\n    if (this.spaceShips.length < 3) {\n      this.spaceShips.push(\n        new Spaceship(\n          this.canvas,\n          edgePosition,\n          this.rotator,\n          edgeRotator,\n          this,\n          this.spaceShipDirection,\n          generateRandomName(),\n          this.dpr\n        )\n      );\n    }\n  }\n\n  drawSpaceShips() {\n    for (const spaceShip of this.spaceShips) {\n      spaceShip.draw();\n    }\n  }\n\n  removeSpaceShip(spaceShipId: string) {\n    this.spaceShips = this.spaceShips.filter(\n      (spaceShip) => spaceShip.id !== spaceShipId\n    );\n  }\n\n  setIsPopupOpen(isPopupOpen: boolean) {\n    this.isPopupOpen = isPopupOpen;\n  }\n\n  drawTrajectory() {\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.arc(\n      this.canvas.width / this.dpr / 2,\n      this.canvas.height / this.dpr / 2,\n      this.distanceFromSun,\n      0,\n      2 * Math.PI,\n      false\n    );\n    this.ctx.strokeStyle = this.foreColor;\n    this.ctx.globalAlpha = 0.3;\n    this.ctx.lineWidth = 0.5;\n    this.ctx.stroke();\n    // this.ctx.fill();\n    this.ctx.restore();\n  }\n\n  drawOverlay(drawPosition: Vector2) {\n    this.ctx.save();\n    this.ctx.beginPath();\n\n    this.ctx.lineWidth = 0;\n    this.ctx.strokeStyle = \"none\";\n\n    this.ctx.arc(drawPosition.x, drawPosition.y, this.radius, 0, 2 * Math.PI);\n    if (!this.content) {\n      this.ctx.fillStyle = `rgba(80, 80, 80, 1)`;\n    } else {\n      this.ctx.fillStyle = `rgba(255, 255, 255, ${changeRelativeValueToRealValueInversed(\n        this.sentimentDegree,\n        0,\n        5,\n        0,\n        0.5\n      )})`;\n    }\n    this.ctx.fill();\n    this.ctx.closePath();\n    this.ctx.restore();\n  }\n\n  draw() {\n    this.drawSpaceShips();\n    this.rotator.degree += this.speed;\n    const positionAffineVector = new Vector2(this.distanceFromSun, 0).toAffine(\n      true\n    );\n    const rotateAffineMatrix = this.rotator.getRotateAffineMatrix();\n    this.position = rotateAffineMatrix\n      .multiplyVector(positionAffineVector)\n      .toVector2();\n    this.canvasDrawPosition = convertCartesianToScreenPoint(\n      this.canvas,\n      this.position,\n      this.dpr\n    );\n    // color the planet\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.arc(\n      this.canvasDrawPosition.x,\n      this.canvasDrawPosition.y,\n      this.radius,\n      0,\n      2 * Math.PI,\n      false\n    );\n    this.ctx.fillStyle = this.foreColor;\n    this.ctx.fill();\n    this.ctx.closePath();\n    this.ctx.restore();\n\n    this.drawOverlay(this.canvasDrawPosition);\n\n    this.ctx.save();\n\n    this.ctx.textAlign = \"center\";\n    this.ctx.textBaseline = \"middle\";\n    // this.ctx.fillStyle = `rgba(255, 255, 255, 0.8)`;\n    const fontSize = 14;\n    const lineHeight = 20;\n    this.ctx.font = `bold ${fontSize}px Questrial`;\n    const wrappedText = wrapText(\n      this.ctx,\n      this.name,\n      this.canvasDrawPosition.x,\n      this.canvasDrawPosition.y,\n      this.radius,\n      lineHeight\n    );\n\n    wrappedText.forEach((item) => {\n      let lineHeightOffset = 0;\n      if (wrappedText.length > 2) {\n        lineHeightOffset = ((lineHeight * 1) / 4) * (wrappedText.length - 2);\n      }\n      this.ctx.fillText(\n        String(item[0]).trim(),\n        item[1] as number,\n        (item[2] as number) -\n          (wrappedText.length - 1) * (fontSize / 2) -\n          lineHeightOffset\n        // lineHeightOffset\n      );\n    });\n    // this.ctx.fillText(\n    //   this.rotator.degree.toFixed(2),\n    //   drawPosition.x,\n    //   drawPosition.y + this.radius + 30\n    // );\n\n    this.ctx.restore();\n  }\n  setDpr(dpr: number) {\n    this.dpr = dpr;\n    this.spaceShips.forEach((spaceShip) => spaceShip.setDpr(dpr));\n  }\n}\n","import { nanoid } from \"nanoid\";\n\nexport const generateRandomName = () => {\n  return nanoid(7);\n};\n","import { CryptoDataFields } from \"context/CryptoContext\";\nimport { changeRelativeValueToRealValue } from \"utils/clamp\";\nimport { wrapText } from \"utils/text\";\nimport { convertCartesianToScreenPoint } from \"../../utils/cartesian\";\nimport { Vector2 } from \"../../utils/math/Vector2\";\n\nexport class Sun {\n  canvas: HTMLCanvasElement;\n  // static radius = 130;\n  radius: number;\n  color = \"#FFFF4D\";\n  brightness: number = 0;\n  position: Vector2 = new Vector2(0, 0);\n  MIN_BRIGHTNESS = 2;\n  MAX_BRIGHTNESS = 20;\n  foreColor: string;\n  backColor: string;\n  maxRadius = 150;\n  minRadius = 80;\n  maxBuzz: number;\n  minBuzz: number;\n  name: string;\n  time: string;\n  dpr: number;\n  canvasDrawPosition: Vector2;\n  totalBuzz: number;\n  constructor(\n    canvas: HTMLCanvasElement,\n    name: string,\n    time: string,\n    foreColor: string,\n    backColor: string,\n    totalBuzz: number,\n    dpr: number,\n    minBuzz: number,\n    maxBuzz: number\n  ) {\n    this.name = name;\n    this.totalBuzz = totalBuzz;\n    this.maxBuzz = maxBuzz;\n    this.minBuzz = minBuzz;\n    this.canvas = canvas;\n    this.foreColor = foreColor;\n    this.backColor = backColor;\n    this.name = name;\n    this.time = time;\n    this.dpr = dpr;\n    this.radius = changeRelativeValueToRealValue(\n      totalBuzz,\n      minBuzz,\n      maxBuzz,\n      this.minRadius,\n      this.maxRadius\n    );\n    this.canvasDrawPosition = convertCartesianToScreenPoint(\n      this.canvas,\n      this.position,\n      this.dpr\n    );\n    this.setBrightness(0);\n  }\n\n  setBrightness(increaseRatio: number) {\n    this.brightness = changeRelativeValueToRealValue(\n      increaseRatio,\n      -1,\n      1,\n      this.MIN_BRIGHTNESS,\n      this.MAX_BRIGHTNESS\n    );\n  }\n\n  drawBrightnessInner(drawPosition: Vector2, ctx: CanvasRenderingContext2D) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(\n      drawPosition.x,\n      drawPosition.y,\n      this.radius + this.brightness / 2,\n      0,\n      2 * Math.PI,\n      false\n    );\n    ctx.fillStyle = \"#fff\";\n    ctx.globalAlpha = 0.4;\n    ctx.fill();\n    ctx.restore();\n  }\n\n  update(\n    data: Partial<{\n      time: string;\n      name: string;\n      totalBuzz: number;\n      foreColor: string;\n    }>\n  ) {\n    if (data.time) {\n      this.time = data.time;\n    }\n    if (data.name) {\n      this.name = data.name;\n    }\n    if (data.totalBuzz) {\n      this.totalBuzz = data.totalBuzz;\n      this.radius = changeRelativeValueToRealValue(\n        this.totalBuzz,\n        this.minBuzz,\n        this.maxBuzz,\n        this.minRadius,\n        this.maxRadius\n      );\n      console.log(this.radius, this.totalBuzz, this.minBuzz, this.maxBuzz);\n    }\n    if (data.foreColor) {\n      this.foreColor = data.foreColor;\n    }\n  }\n\n  drawBrightnessOuter(drawPosition: Vector2, ctx: CanvasRenderingContext2D) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(\n      drawPosition.x,\n      drawPosition.y,\n      this.radius + this.brightness,\n      0,\n      2 * Math.PI,\n      false\n    );\n    ctx.fillStyle = \"#fff\";\n    ctx.globalAlpha = 0.2;\n    ctx.fill();\n    ctx.restore();\n  }\n\n  drawSun(drawPosition: Vector2, ctx: CanvasRenderingContext2D) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(drawPosition.x, drawPosition.y, this.radius, 0, 2 * Math.PI, false);\n    ctx.fillStyle = this.backColor;\n    ctx.fill();\n    ctx.restore();\n  }\n  draw() {\n    const ctx = this.canvas.getContext(\"2d\")!;\n    const drawPosition = convertCartesianToScreenPoint(\n      this.canvas,\n      this.position,\n      this.dpr\n    );\n    this.canvasDrawPosition = drawPosition;\n    this.drawBrightnessInner(drawPosition, ctx);\n    this.drawBrightnessOuter(drawPosition, ctx);\n    this.drawSun(drawPosition, ctx);\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    // ctx.fillStyle = `rgba(255, 255, 255, 0.8)`;\n    const fontSize = 35;\n    const lineHeight = 35;\n    ctx.font = `${fontSize}px Questrial`;\n    const wrappedText = wrapText(\n      ctx,\n      this.name,\n      drawPosition.x,\n      drawPosition.y,\n      200,\n      lineHeight\n    );\n    let lastYLocation = 0;\n    wrappedText.forEach((line, index) => {\n      ctx.fillText(\n        String(line[0]).trim(),\n        line[1] as number,\n        (line[2] as number) - (wrappedText.length - 1) * (fontSize / 2)\n      );\n      lastYLocation = ((line[2] as number) -\n        (wrappedText.length - 1) * (fontSize / 2)) as number;\n    });\n\n    ctx.save();\n    ctx.font = \"24px Questrial\";\n    ctx.fillText(this.time, drawPosition.x, lastYLocation + 40);\n\n    ctx.restore();\n  }\n\n  setDpr(dpr: number) {\n    this.dpr = dpr;\n  }\n}\n","import { Language } from \"context/CryptoContext\";\nimport { FrontierData } from \"context/FrontiersContext\";\nimport { convertCartesianToScreenPoint } from \"utils/cartesian\";\nimport {\n  changeRelativeValueToRealValue,\n  changeRelativeValueToRealValueInversed,\n} from \"utils/clamp\";\nimport { drawRoundRect } from \"utils/drawShape\";\nimport { Vector2 } from \"utils/math/Vector2\";\nimport { wrapText } from \"utils/text\";\nimport { Planet } from \"./Planet\";\nimport { Sun } from \"./Sun\";\n\nexport class InfographicCanvas {\n  private fps = 24;\n  element: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n  width: number = 0;\n  height: number = 0;\n  loop: number = 0;\n  sun: Sun | null;\n  language: Language;\n  planets: Array<Planet> = [];\n  requestAnimationFrameId: number;\n  MIN_PLANET_SIZE = 20;\n  MAX_PLANET_SIZE = 80;\n  frameCount = 0;\n  backgroundLoopMax = 1000;\n  dpr: number = 1;\n  hoveredPlanet: Planet | null = null;\n  isPopupOpen: boolean = false;\n  isSunHovered: boolean = false;\n  currentFrontierColor: { r: number; g: number; b: number } = {\n    r: 0,\n    g: 25,\n    b: 60,\n  };\n\n  constructor(element: HTMLCanvasElement) {\n    this.language = Language.KOREAN;\n    this.element = element;\n    this.ctx = element.getContext(\"2d\")!;\n    this.sun = null;\n    this.render();\n    this.requestAnimationFrameId = requestAnimationFrame(this.render);\n    this.planets = [];\n    this.initialize();\n  }\n\n  changeLanguage(language: Language) {\n    this.language = language;\n  }\n\n  onMouseMove(e: MouseEvent) {\n    let isAnyPlanetHovered = false;\n    if (this.sun) {\n      const screenPoint = convertCartesianToScreenPoint(\n        this.element,\n        this.sun.position,\n        this.dpr\n      );\n      const distanceToSun = screenPoint.squareDistanceTo(\n        new Vector2(e.clientX, e.clientY)\n      );\n      if (Math.sqrt(distanceToSun) < this.sun.radius) {\n        this.isSunHovered = true;\n      } else {\n        this.isSunHovered = false;\n      }\n    }\n    for (const planet of this.planets) {\n      const screenPoint = convertCartesianToScreenPoint(\n        this.element,\n        planet.position,\n        this.dpr\n      );\n      const distance = screenPoint.squareDistanceTo(\n        new Vector2(e.clientX, e.clientY)\n      );\n      if (Math.sqrt(distance) < planet.radius) {\n        planet.setIsPopupOpen(true);\n        isAnyPlanetHovered = true;\n        this.hoveredPlanet = planet;\n      } else {\n        planet.setIsPopupOpen(false);\n      }\n    }\n    if (isAnyPlanetHovered) {\n      this.isPopupOpen = true;\n    } else {\n      this.isPopupOpen = false;\n    }\n    if (this.isSunHovered) {\n      this.hoveredPlanet = null;\n      this.isPopupOpen = true;\n    }\n  }\n\n  drawButton(drawPosition: Vector2) {\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n    this.ctx.arc(drawPosition.x, drawPosition.y, 20, 0, Math.PI * 2);\n    this.ctx.fill();\n    this.ctx.closePath();\n    this.ctx.restore();\n  }\n\n  drawPopup(drawPosition: Vector2, component: Planet | Sun) {\n    if (!this.hoveredPlanet?.content) {\n      return;\n    }\n    const wrappedTextMaxWidth = 180;\n    const wrappedTextLineHeight = 20;\n    const wrappedTextFontSize = 15;\n\n    const rectPadding = 8;\n    const rectHeight = 43;\n    const popupPadding = 8;\n    const titleMarginTop = popupPadding + 5;\n    const headerHeight = titleMarginTop + 22;\n    const dataCountToShow = component instanceof Planet ? 5 : 4;\n    let dataIndex = 0;\n    let quadrant = 0b00;\n    if (\n      drawPosition.x > this.element.width / this.dpr / 2 &&\n      drawPosition.y < this.element.height / this.dpr / 2\n    ) {\n      quadrant = 0b00;\n    } else if (\n      drawPosition.x < this.element.width / this.dpr / 2 &&\n      drawPosition.y < this.element.height / this.dpr / 2\n    ) {\n      quadrant = 0b01;\n    } else if (\n      drawPosition.x < this.element.width / this.dpr / 2 &&\n      drawPosition.y > this.element.height / this.dpr / 2\n    ) {\n      quadrant = 0b11;\n    } else {\n      quadrant = 0b10;\n    }\n    const isSunHovered = component instanceof Sun;\n    const borderRadius = 10;\n    const popupWidth = 210;\n    let maxHeight = 0;\n    let minHeight = Number.MAX_VALUE;\n    this.ctx.save();\n    let topLeftPoint = new Vector2(drawPosition.x, drawPosition.y);\n    this.ctx.font = `${wrappedTextFontSize}px Questrial`;\n    const mockedWrappedText = wrapText(\n      this.ctx,\n      this.hoveredPlanet.content,\n      topLeftPoint.x + 5,\n      topLeftPoint.y + 23,\n      wrappedTextMaxWidth,\n      wrappedTextLineHeight\n    );\n    mockedWrappedText.forEach((line) => {\n      if (line[2] > maxHeight) {\n        maxHeight = line[2] as number;\n      }\n      if (line[2] < minHeight) {\n        minHeight = line[2] as number;\n      }\n    });\n\n    const popupHeight = headerHeight + maxHeight - minHeight + 27;\n    // mockedWrappedText.length * 10;\n    // -\n    // (mockedWrappedText[2][2] as number);\n    //isSunHovered ? 135 : 175;\n    this.ctx.restore();\n    const width = quadrant % 2 === 0 ? popupWidth : -popupWidth;\n    const height = (quadrant & 0b10) === 0b10 ? -popupHeight : popupHeight;\n\n    if (quadrant === 0b01) {\n      topLeftPoint = topLeftPoint.add(new Vector2(-popupWidth, 0));\n    } else if (quadrant === 0b11) {\n      topLeftPoint = topLeftPoint.add(new Vector2(-popupWidth, -popupHeight));\n    } else if (quadrant === 0b10) {\n      topLeftPoint = topLeftPoint.add(new Vector2(0, -popupHeight));\n    }\n\n    this.ctx.save();\n    drawRoundRect(\n      this.ctx,\n      quadrant % 2 === 0\n        ? drawPosition.add(new Vector2(borderRadius, 0))\n        : drawPosition.subtract(new Vector2(borderRadius, 0)),\n      drawPosition,\n      borderRadius,\n      width,\n      height\n    );\n    this.ctx.fillStyle = `rgba(255,255,255, 0.95)`;\n    this.ctx.fill();\n    this.ctx.stroke();\n    this.ctx.restore();\n\n    if (!this.hoveredPlanet || !this.sun) {\n      return;\n    }\n    this.ctx.save();\n\n    this.ctx.font = \"20px Questrial\";\n    this.ctx.textAlign = \"start\";\n    this.ctx.fillText(\n      this.sun.time !== \"beyond\" ? \"In \" + this.sun.time : \"Beyond...\",\n      topLeftPoint.x + 5,\n      topLeftPoint.y + 20\n    );\n\n    this.ctx.font = `${wrappedTextFontSize}px Questrial`;\n\n    const wrappedText = wrapText(\n      this.ctx,\n      this.hoveredPlanet.content,\n      topLeftPoint.x + 5,\n      topLeftPoint.y + 23,\n      wrappedTextMaxWidth,\n      wrappedTextLineHeight\n    );\n\n    wrappedText.forEach((item) => {\n      this.ctx.fillText(\n        String(item[0]).trim(),\n        item[1] as number,\n        (item[2] as number) + 20\n        // lineHeightOffset\n      );\n    });\n\n    this.ctx.restore();\n\n    // this.ctx.fillStyle = component.foreColor;\n    // this.ctx.fill();\n    // this.ctx.textAlign = \"start\";\n    // this.ctx.textBaseline = \"top\";\n    // this.ctx.fillStyle = \"black\";\n\n    // // this.ctx.font = \"12px Noto Sans KR\";\n    // this.ctx.font = \"bold 20px Anek Devanagari\";\n    // this.ctx.fillStyle = \"white\";\n\n    // const titleYPos = topLeftPoint.y + popupPadding + 5;\n    // this.ctx.fillText(component.name, topLeftPoint.x + popupPadding, titleYPos);\n\n    // this.ctx.textAlign = \"start\";\n    // this.ctx.font = \"normal 10px Noto Sans KR\";\n    // //correlation to btc\n    // const marketCapYPos = titleYPos + 20 + 2;\n\n    // this.ctx.fillStyle = \"black\";\n\n    // this.ctx.save();\n    // this.ctx.fillStyle = dataIndex % 2 === 0 ? \"#D9D9D9\" : \"#BCBCBC\";\n    // dataIndex++;\n    // this.ctx.fillRect(topLeftPoint.x, marketCapYPos, popupWidth, rectHeight);\n    // this.ctx.restore();\n\n    // let correlationYPos = marketCapYPos;\n    // //correlation to btc\n    // if (!isSunHovered) {\n    //   correlationYPos = correlationYPos + rectHeight;\n    //   this.ctx.save();\n    //   this.ctx.fillStyle = dataIndex % 2 === 0 ? \"#D9D9D9\" : \"#BCBCBC\";\n    //   dataIndex++;\n    //   this.ctx.fillRect(\n    //     topLeftPoint.x,\n    //     correlationYPos,\n    //     popupWidth,\n    //     rectHeight\n    //   );\n    //   this.ctx.restore();\n    //   this.ctx.font = \"normal 10px Noto Sans KR\";\n    //   this.ctx.fillText(\n    //     this.language === Language.ENGLISH\n    //       ? \"Correlation to BTC (Distance from Sun)\"\n    //       : \"BTC와의 가격 변동 유사성 (태양과의 거리)\",\n    //     topLeftPoint.x + popupPadding,\n    //     correlationYPos + rectPadding\n    //   );\n    //   this.ctx.font = \"bold 14px Noto Sans KR\";\n    //   // this.ctx.fillText(\n    //   //   (component as Planet).correlationCoefficient.toFixed(5),\n    //   //   topLeftPoint.x + popupPadding,\n    //   //   correlationYPos + rectPadding + 15\n    //   // );\n    // }\n\n    // const relativeStrengthYPos = correlationYPos + rectHeight;\n    // this.ctx.save();\n    // this.ctx.fillStyle = dataIndex % 2 === 0 ? \"#D9D9D9\" : \"#BCBCBC\";\n    // dataIndex++;\n    // this.ctx.fillRect(\n    //   topLeftPoint.x,\n    //   relativeStrengthYPos,\n    //   popupWidth,\n    //   rectHeight\n    // );\n    // this.ctx.restore();\n    // //Moving average\n    // this.ctx.font = \"normal 10px Noto Sans KR\";\n    // const rsiText =\n    //   this.language === Language.ENGLISH\n    //     ? \"Relative Strength Index (Spaceship in/out)\"\n    //     : \"RSI 과매수 정도 (우주선 유입/출입)\";\n    // this.ctx.fillText(\n    //   isSunHovered ? rsiText.split(\"(\")[0] : rsiText,\n    //   topLeftPoint.x + popupPadding,\n    //   relativeStrengthYPos + rectPadding\n    // );\n\n    // const mfiYPos = relativeStrengthYPos + rectHeight;\n    // this.ctx.save();\n    // this.ctx.fillStyle = dataIndex % 2 === 0 ? \"#D9D9D9\" : \"#BCBCBC\";\n    // dataIndex++;\n    // this.ctx.fillRect(topLeftPoint.x, mfiYPos, popupWidth, rectHeight);\n    // this.ctx.restore();\n\n    // this.ctx.font = \"normal 10px Noto Sans KR\";\n    // const mfiText =\n    //   this.language === Language.ENGLISH\n    //     ? \"Money Flow Index (Planet Ice Age)\"\n    //     : \"MFI 과매수 정도 (행성 빙하기 정도)\";\n    // this.ctx.fillText(\n    //   isSunHovered ? mfiText.split(\"(\")[0] : mfiText,\n    //   topLeftPoint.x + popupPadding,\n    //   mfiYPos + rectPadding\n    // );\n\n    // //clip\n    // drawRoundRect(\n    //   this.ctx,\n    //   quadrant % 2 === 0\n    //     ? drawPosition.add(new Vector2(borderRadius, 0))\n    //     : drawPosition.subtract(new Vector2(borderRadius, 0)),\n    //   drawPosition,\n    //   borderRadius,\n    //   width,\n    //   height\n    // );\n    // this.ctx.clip();\n\n    // const increaseRatioYPos = mfiYPos + rectHeight;\n    // this.ctx.save();\n    // this.ctx.fillStyle = dataIndex % 2 === 0 ? \"#D9D9D9\" : \"#BCBCBC\";\n    // dataIndex++;\n    // this.ctx.fillRect(\n    //   topLeftPoint.x,\n    //   increaseRatioYPos,\n    //   popupWidth,\n    //   rectHeight\n    // );\n    // this.ctx.restore();\n\n    // this.ctx.font = \"normal 10px Noto Sans KR\";\n    // const increaseRatioText =\n    //   this.language === Language.ENGLISH\n    //     ? \"MA Increase Rate (Orbit Speed)\"\n    //     : \"가격 이동평균선 증가율 (행성 공전속도)\";\n    // this.ctx.fillText(\n    //   isSunHovered ? increaseRatioText.split(\"(\")[0] : increaseRatioText,\n    //   topLeftPoint.x + popupPadding,\n    //   increaseRatioYPos + rectPadding\n    // );\n\n    // this.ctx.restore();\n  }\n\n  setSun(\n    name: string,\n    foreColor: string,\n    backColor: string,\n    time: string,\n    avgBuzz: number,\n    minBuzz: number,\n    maxBuzz: number\n  ) {\n    if (foreColor) {\n      const getRGBFromForeColor = foreColor\n        .trim()\n        .split(\"(\")[1]\n        .split(\")\")[0]\n        .split(\",\") as [string, string, string];\n      this.currentFrontierColor = {\n        r: parseInt(getRGBFromForeColor[0]),\n        g: parseInt(getRGBFromForeColor[1]),\n        b: parseInt(getRGBFromForeColor[2]),\n      };\n    }\n    if (!this.sun) {\n      this.sun = new Sun(\n        this.element,\n        name,\n        time,\n        foreColor,\n        backColor,\n        avgBuzz,\n        this.dpr,\n        minBuzz,\n        maxBuzz\n      );\n    } else {\n      this.sun.update({ name, time, totalBuzz: avgBuzz, foreColor: foreColor });\n    }\n  }\n\n  setPlanet(\n    frontierDataList: Array<FrontierData>,\n    time: \"2025\" | \"2030\" | \"2040\" | \"2050\" | \"beyond\",\n    totalBuzz: number\n  ) {\n    if (!this.sun) {\n      return;\n    }\n    // first initialize\n    this.planets = frontierDataList.map((frontierData, index) => {\n      const name = frontierData.name;\n      const buzz = frontierData.buzz;\n      const type = frontierData.type;\n      const sources = frontierData.sources;\n      const urls = frontierData.urls;\n      const maxBuzz = frontierDataList\n        .map((data) => data.buzz)\n        .sort((a, b) => b - a)[0];\n      const minBuzz = frontierDataList\n        .map((data) => data.buzz)\n        .sort((a, b) => a - b)[0];\n\n      const content = frontierData[time];\n      return new Planet(\n        this.element,\n        name,\n        content,\n        frontierData.color,\n        \"#aaa\",\n        maxBuzz,\n        minBuzz,\n        index / frontierDataList.length,\n        buzz,\n        this.dpr,\n        this.sun!\n      );\n    });\n  }\n\n  updatePlanets(data: { name: string; content: string }[]) {\n    this.planets.forEach((planet) => {\n      const queriedData = data.find((element) => element.name === planet.name);\n      if (queriedData) {\n        planet.update({\n          title: queriedData.name,\n          content: queriedData.content,\n        });\n      }\n    });\n  }\n\n  addPlanet(\n    name: string,\n    increaseRatio: number,\n    correlationCoefficient: number,\n    volume: number,\n    price: number,\n    support: Array<number>,\n    resistance: Array<number>,\n    rsi: number,\n    foreColor: string,\n    backColor: string,\n    logoImg: string,\n    mfi: number\n  ) {}\n\n  initialize() {\n    // this.planets.push(new Planet(this.element, this.sun.radius + 50, 1, 80));\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.element.addEventListener(\"mousemove\", this.onMouseMove);\n  }\n\n  setWidth(width: number, devicePixelRatio?: number) {\n    this.width = width;\n    this.element.width = devicePixelRatio ? width * devicePixelRatio : width;\n    this.element.style.width = `${width}px`;\n  }\n\n  setHeight(height: number, devicePixelRatio?: number) {\n    this.height = height;\n    this.element.height = devicePixelRatio ? height * devicePixelRatio : height;\n    this.element.style.height = `${height}px`;\n  }\n\n  setSize(width: number, height: number, devicePixelRatio?: number) {\n    this.setWidth(width, devicePixelRatio);\n    this.setHeight(height, devicePixelRatio);\n    this.dpr = devicePixelRatio ? devicePixelRatio : this.dpr;\n  }\n\n  scale(x: number, y: number) {\n    this.ctx.scale(x, y);\n    this.sun?.setDpr(this.dpr);\n    this.planets.forEach((planet) => planet.setDpr(this.dpr));\n  }\n\n  drawBackground() {\n    this.ctx.save();\n    const grad = this.ctx.createLinearGradient(0, 0, this.width, this.height);\n    grad.addColorStop(0, `rgba(0, 0, 0, 0)`);\n    grad.addColorStop(\n      changeRelativeValueToRealValue(\n        this.loop,\n        0,\n        this.backgroundLoopMax,\n        0,\n        1\n      ),\n      `rgba(${this.currentFrontierColor.r}, ${this.currentFrontierColor.g}, ${\n        this.currentFrontierColor.b\n      }, ${changeRelativeValueToRealValueInversed(\n        Math.abs(this.loop - this.backgroundLoopMax / 2),\n        0,\n        this.backgroundLoopMax / 2,\n        0,\n        0.15\n      )})`\n    );\n    grad.addColorStop(1, `rgba(0, 0, 0, 0)`);\n    this.ctx.fillStyle = grad;\n    this.ctx.fillRect(0, 0, this.width, this.height);\n    this.ctx.restore();\n  }\n\n  render = () => {\n    this.frameCount++;\n    this.loop++;\n    if (this.frameCount === this.fps + 1) {\n      this.frameCount = 0;\n    }\n    if (this.loop === this.backgroundLoopMax + 1) {\n      this.loop = 0;\n    }\n    this.clear();\n    // this.drawBackground();\n    this.drawScene();\n\n    setTimeout(() => {\n      requestAnimationFrame(this.render.bind(this));\n    }, 1000 / this.fps);\n  };\n\n  drawScene() {\n    this.drawBackground();\n    this.drawGalaxyComponents();\n    if (this.isPopupOpen) {\n      if (this.hoveredPlanet) {\n        this.drawPopup(\n          this.hoveredPlanet.canvasDrawPosition,\n          this.hoveredPlanet\n        );\n      } else {\n        //sun popup\n        if (this.sun) {\n          this.drawPopup(this.sun.canvasDrawPosition, this.sun);\n        }\n      }\n    }\n  }\n\n  drawDummy() {}\n\n  drawGalaxyComponents() {\n    if (this.sun) {\n      this.sun.draw();\n    }\n    for (const planet of this.planets) {\n      planet.drawTrajectory();\n    }\n    for (const planet of this.planets) {\n      planet.draw();\n    }\n  }\n\n  clear() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n}\n","import { Vector2 } from \"./math/Vector2\";\n\nexport const drawRoundRect = (\n  ctx: CanvasRenderingContext2D,\n  drawingStartPoint: Vector2,\n  drawPosition: Vector2,\n  borderRadius: number,\n  width: number,\n  height: number\n) => {\n  ctx.beginPath();\n  ctx.moveTo(drawingStartPoint.x, drawingStartPoint.y);\n  ctx.arcTo(\n    drawPosition.x + width,\n    drawPosition.y,\n    drawPosition.x + width,\n    drawPosition.y + height,\n    borderRadius\n  );\n  ctx.arcTo(\n    drawPosition.x + width,\n    drawPosition.y + height,\n    drawPosition.x,\n    drawPosition.y + height,\n    borderRadius\n  );\n  ctx.arcTo(\n    drawPosition.x,\n    drawPosition.y + height,\n    drawPosition.x,\n    drawPosition.y,\n    borderRadius\n  );\n  ctx.arcTo(\n    drawPosition.x,\n    drawPosition.y,\n    drawPosition.x + width,\n    drawPosition.y,\n    borderRadius\n  );\n  ctx.closePath();\n};\n","import \"./App.css\";\nimport Infographic from \"./components/Infographic\";\nimport { CryptoContextProvider } from \"./context/CryptoContext\";\nimport { FrontiersContextProvider } from \"context/FrontiersContext\";\n\nfunction App() {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        minHeight: \"100vh\",\n        // fontFamily: \"Questrial\",\n        // fontFamily: \"Righteous\",\n      }}\n    >\n      {/* <header>\n        <h1>Crypto Galaxy</h1>\n      </header> */}\n      <FrontiersContextProvider>\n        {/* <CryptoContextProvider> */}\n        <Infographic />\n        {/* </CryptoContextProvider> */}\n      </FrontiersContextProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\"root\") as HTMLElement\n);\nroot.render(\n  // <React.StrictMode>\n  <App />\n  // </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}